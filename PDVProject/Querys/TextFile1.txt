
--TABELA FUNCIONARIOS

CREATE TABLE Funcionarios(
	Id INT PRIMARY KEY  NOT NULL,
	Ide VARCHAR(23) NOT NULL,
	Nome VARCHAR(60) NOT NULL,
	Funcao VARCHAR(40) NOT NULL,
	Comissao DECIMAL(8,2) NOT NULL,
	DataAlteracao SMALLDATETIME NOT NULL,
	DataCriacao SMALLDATETIME NOT NULL,
	Status INT NOT NULL,
)

--TABELA PRODUTOS
CREATE TABLE Produtos(
	Id INT PRIMARY KEY  NOT NULL,
	Ide VARCHAR(23) NOT NULL,
	Nome VARCHAR(60) NOT NULL,
	Ncm varchar(8) NOT NULL,
	Preco DECIMAL (10,2) NOT NULL,
	CodigoFornecedor varchar(15) NOT NULL,
	DataAlteracao SMALLDATETIME NOT NULL,
	DataCriacao SMALLDATETIME NOT NULL,
	Status INT NOT NULL,
)

--TABELA MOVIMENTOS
CREATE TABLE Movimento(
	Id INT PRIMARY KEY,
	Ide VARCHAR(23) NOT NULL,
	TotalDesconto DECIMAL(2,2) NOT NULL,
	TotalFinal DECIMAL(10,2) NOT NULL,
	DataAlteracao SMALLDATETIME NOT NULL,
	DataCriacao SMALLDATETIME NOT NULL,
	Status INT NOT NULL,
	--Foreign Key
	Funcionario__Id INT NOT NULL,
	Cliente__id INT NOT NULL,
	CONSTRAINT fk_funcionario__Id FOREIGN KEY (Funcionario__Id) REFERENCES Funcionarios(Id),
	CONSTRAINT fk_Cliente__Id FOREIGN KEY (Cliente__Id) REFERENCES Cliente(Id)
)

--TABELA MOVIMENTO_PRODUTO
CREATE TABLE Movimento_Produto(
	Id INT PRIMARY KEY,
	Ide VARCHAR(23) NOT NULL,
	TotalFinal DECIMAL(10,2) NOT NULL,
	DataLancamento SMALLDATETIME NOT NULL,
	--Foreign Key
	Movimento__Id INT NOT NULL,
	CONSTRAINT fk_Movimento__Id FOREIGN KEY (Movimento__Id) REFERENCES Movimento(Id)
)
ALTER TABLE MOVIMENTO_PRODUTO
	ADD TotalOriginal DECIMAL(10,2) NOT NULL
ALTER TABLE MOVIMENTO_PRODUTO
	ADD Funcionario__Id INT NOT NULL
ALTER TABLE MOVIMENTO_PRODUTO
	ADD CONSTRAINT fk_funcionarioMp__Id FOREIGN KEY (Funcionario__Id) REFERENCES Funcionarios(Id)
ALTER TABLE MOVIMENTO_PRODUTO
	ADD Quantidade INT NOT NULL
ALTER TABLE MOVIMENTO_PRODUTO
	ADD Produto__Id INT NOT NULL
ALTER TABLE MOVIMENTO_PRODUTO
	ADD CONSTRAINT fk_ProdutoMp__Id FOREIGN KEY (Produto__Id) REFERENCES Produtos(Id)

